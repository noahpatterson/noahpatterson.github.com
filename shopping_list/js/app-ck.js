function outputQueryResults(e,t){var n=[];console.log("in outputFunc");console.log(t.rows.item(0).count);for(var r=0;r<t.rows.length;r++)n.push(t.rows.item(r).count)}function loadshopListItems(e,t){var n="",r=document.getElementById("list-section1");for(var i=0;i<t.rows.length;i++)n+=rendershopList(t.rows.item(i));r.innerHTML=n}function rendershopList(e){var t;e.checked===1?t="item-completed":t="";return"<div class='panel item large-12 large-centered columns'><textarea placeholder='Title' class='title-input "+t+"'>"+e.title+"</textarea><br /><textarea placeholder='Notes' class=' notes-input "+t+"'>"+e.notes+"</textarea><p class=' enter-date'>"+e.added_on+"</p><?xml version='1.0' encoding='utf-8'?> <!-- Generator: IcoMoon.io --> <!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'>"+"<div class='check-icon'><img src='img/checkmark.png'></div>"+"<div data-tip='Drag Me!' class='close-icon'><img src='img/close.png'></div>"+"<div data-tip='Drag Me!' class='move-icon-container'><svg class='move-icon' data-tip='Drag Me!' width='20' height='20' viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill='#000000'><path d='M 32.00,96.00L 480.00,96.00L 480.00,192.00L 32.00,192.00zM 32.00,224.00L 480.00,224.00L 480.00,320.00L 32.00,320.00zM 32.00,352.00L 480.00,352.00L 480.00,448.00L 32.00,448.00z' ></path></svg>"+"</div></div>"}function init(){shopList.webdb.open();shopList.webdb.createTable();shopList.webdb.getAllshopListItems(loadshopListItems)}function escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function add_new_item(){var e=new Date,t="<div class='panel item large-12 large-centered columns ' data-id=''><textarea placeholder='Title' class='title-input'>",n="</textarea><br /><textarea placeholder='Notes' class=' notes-input'>",r="</textarea><p class=' enter-date'>"+e+"</p><?xml version='1.0' encoding='utf-8'?> <!-- Generator: IcoMoon.io --> <!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'>"+"<div class='check-icon'><img src='img/checkmark.png'></div>"+"<div data-tip='Drag Me!' class='close-icon'><img src='img/close.png'></div>"+"<div class='move-icon-container' data-tip='Drag Me!'><svg class='move-icon' data-tip='Drag Me!' width='20' height='20' viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill='#000000'><path d='M 32.00,96.00L 480.00,96.00L 480.00,192.00L 32.00,192.00zM 32.00,224.00L 480.00,224.00L 480.00,320.00L 32.00,320.00zM 32.00,352.00L 480.00,352.00L 480.00,448.00L 32.00,448.00z' ></path></svg></div>"+"</div>",i=escapeHtml($(":nth-child(1)",$("#new-item-form")).val()),s=escapeHtml($(":nth-child(2)",$("#new-item-form")).val());console.log("title: "+i+" notes: "+s);$("#list-section1").append(t+i+n+s+r);$(":nth-child(1)",$("#new-item-form")).val("");$(":nth-child(2)",$("#new-item-form")).val("");shopList.webdb.addshopList(i,s,e)}var shopList={};shopList.webdb={};shopList.webdb.db=null;shopList.webdb.open=function(){var e=5242880;shopList.webdb.db=openDatabase("shopList","1.0","shopList manager",e)};shopList.webdb.createTable=function(){var e=shopList.webdb.db;e.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS shopList(ID INTEGER PRIMARY KEY ASC, title TEXT, notes TEXT, added_on DATETIME, checked INTEGER)",[])})};shopList.webdb.addshopList=function(e,t,n){var r=shopList.webdb.db,i=0;r.transaction(function(r){r.executeSql("INSERT INTO shopList(title, notes, added_on,checked) VALUES (?,?,?,?)",[e,t,n,i])})};shopList.webdb.onError=function(e,t){alert("There has been an error: "+t.message)};shopList.webdb.onSuccess=function(e,t){shopList.webdb.getAllshopListItems(loadshopListItems)};shopList.webdb.getAllshopListItems=function(e){var t=shopList.webdb.db;t.transaction(function(t){t.executeSql("SELECT * FROM shopList",[],e,shopList.webdb.onError)})};shopList.webdb.deleteshopList=function(e,t,n){var r=shopList.webdb.db;r.transaction(function(r){r.executeSql("DELETE FROM shopList WHERE title=? AND notes=? AND added_on=?",[e,t,n])})};shopList.webdb.updateChecked=function(e,t,n,r,i){var s=shopList.webdb.db;s.transaction(function(s){s.executeSql("UPDATE shopList SET added_on=?,checked=? WHERE title=? AND notes=? AND added_on=?",[i,r,e,t,n])})};shopList.webdb.updateInputOnType=function(e,t,n,r,i,s){var o=shopList.webdb.db;o.transaction(function(o){console.log("title="+e+" notes="+t+" date="+n+" fieldtoupdate="+r+" newupdate="+i);o.executeSql("UPDATE shopList SET added_on=?, "+r+"=? WHERE title=? AND notes=? AND added_on=?",[s,i,e,t,n])})};$(document).ready(function(){init()});$("#list-section1").on("click","div",function(e){var t=$(e.target);if(t.is("img")||t.is("textarea")&&t.attr("placeholder")=="Notes"||t.is("textarea")&&t.attr("placeholder")=="Title"&&$(this).hasClass("expand-list"))return;$(this).toggleClass("expand-list")});$("#add-new-button").on("click",function(){add_new_item()});$("#add-new-item").submit(function(){add_new_item();return!1});$("#list-section1").sortable({axis:"y",handle:".move-icon"});$("#list-section1").on("click",".close-icon",function(){var e=$(":nth-child(1)",$(this).closest(".item")).val(),t=$(":nth-child(3)",$(this).closest(".item")).val(),n=$(":nth-child(4)",$(this).closest(".item")).text();shopList.webdb.deleteshopList(e,t,n);$(this).closest(".item").remove()});var toUpdateTitle,toUpdateNotes,toUpdateDate;$("#list-section1").on("focusin","textarea",function(){toUpdateTitle=$(":nth-child(1)",$(this).closest(".item")).val();toUpdateNotes=$(":nth-child(3)",$(this).closest(".item")).val();toUpdateDate=$(":nth-child(4)",$(this).closest(".item")).text()});$("#list-section1").on("click",".check-icon",function(){var e=new Date,t=$(":nth-child(1)",$(this).closest(".item")).val(),n=$(":nth-child(3)",$(this).closest(".item")).val(),r=$(":nth-child(4)",$(this).closest(".item")).text();$(this).closest(".item").children("input, textarea").toggleClass("item-completed");if($(this).closest(".item").children("input, textarea").hasClass("item-completed")){shopList.webdb.updateChecked(t,n,r,1,e);$(":nth-child(4)",$(this).closest(".item")).text(e)}else{shopList.webdb.updateChecked(t,n,r,0,e);$(":nth-child(4)",$(this).closest(".item")).text(e)}});$("#list-section1").on("focusout","textarea",function(){var e=new Date;$(":nth-child(4)",$(this).closest(".item")).text(e);var t=$(this).val(),n=$(this).attr("placeholder").toLowerCase();shopList.webdb.updateInputOnType(toUpdateTitle,toUpdateNotes,toUpdateDate,n,t,e)});